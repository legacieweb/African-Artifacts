<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>African Artifacts | Shirts</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2416 100%);
      color: #333;
      min-height: 100vh;
    }

    /* Header with Auth Buttons */
    .header-top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1.5rem;
      background: rgba(0, 0, 0, 0.4);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header-auth-buttons {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .auth-btn {
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .auth-btn.login {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .auth-btn.login:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.6);
    }

    .auth-btn.primary {
      background: linear-gradient(135deg, #f28c44 0%, #e8722c 100%);
      color: white;
    }

    .auth-btn.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(232, 114, 44, 0.4);
    }

    .auth-btn.logout {
      background: rgba(232, 114, 44, 0.2);
      color: #ff9966;
      border: 1px solid rgba(232, 114, 44, 0.4);
    }

    .auth-btn.logout:hover {
      background: rgba(232, 114, 44, 0.3);
    }

    .cart-btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease;
      padding: 0.5rem;
    }

    .cart-btn:hover {
      transform: scale(1.1);
    }

    .cart-icon {
      font-size: 1.5rem;
    }

    .cart-badge {
      position: absolute;
      top: -0.5rem;
      right: -0.5rem;
      background: #ff6b35;
      color: white;
      border-radius: 50%;
      width: 1.3rem;
      height: 1.3rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(255, 107, 53, 0.4);
    }

    @media (max-width: 480px) {
      .header-top-bar {
        gap: 0.5rem;
        padding: 0.6rem 1rem;
      }

      .header-auth-buttons {
        gap: 0.3rem;
      }

      .auth-btn {
        padding: 0.4rem 0.6rem;
        font-size: 0.7rem;
      }

      .cart-btn {
        padding: 0.3rem;
      }

      .cart-icon {
        font-size: 1.2rem;
      }

      .cart-badge {
        width: 1.1rem;
        height: 1.1rem;
        font-size: 0.6rem;
      }
    }

    header {
      background-color: #3e2f1c;
      color: white;
      padding: 1.5rem;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }

    header h1 {
      font-size: 2rem;
      font-weight: bold;
      margin: 0;
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
      word-break: break-word;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background-color: #5a4228;
      padding: 0.8rem 0.5rem;
      gap: 0.5rem;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 0.6rem 0.8rem;
      border-radius: 4px;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      display: inline-block;
    }

    nav a:hover {
      background-color: #7b5934;
      transform: translateY(-2px);
    }

    .category-header {
      background: linear-gradient(135deg, rgba(138, 76, 44, 0.95) 0%, rgba(90, 66, 40, 0.95) 100%),
                  url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 400"><defs><pattern id="lines" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="100" y2="100" stroke="%23d4af6a" stroke-width="2" opacity="0.2"/></pattern></defs><rect width="1200" height="400" fill="url(%23lines)"/></svg>');
      background-attachment: fixed;
      padding: 3rem 2rem;
      text-align: center;
      color: white;
      margin-bottom: 2rem;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

    .category-header h2 {
      font-size: 2.8rem;
      margin-bottom: 1rem;
      text-shadow: 3px 3px 12px rgba(0, 0, 0, 0.8);
      font-weight: bold;
      letter-spacing: 1px;
    }

    .category-header p {
      font-size: 1.1rem;
      max-width: 800px;
      margin: 0 auto;
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
      line-height: 1.6;
    }

    .search-container {
      max-width: 600px;
      margin: 2rem auto;
      padding: 0 2rem;
    }

    .search-box {
      display: flex;
      gap: 0.5rem;
      background: white;
      padding: 0.5rem;
      border-radius: 30px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .search-box input {
      flex: 1;
      border: none;
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      outline: none;
      border-radius: 25px;
    }

    .search-box button {
      background-color: #8a4c2c;
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .search-box button:hover {
      background-color: #a85a38;
      transform: scale(1.05);
    }

    .products-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1.5rem 1rem;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1.5rem;
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .product-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
    }

    .product-image {
      width: 100%;
      height: 220px;
      background: linear-gradient(135deg, #e8dcc8 0%, #d9cbb4 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .product-card:hover .product-image img {
      transform: scale(1.05);
      opacity: 1;
    }

    .image-btn { position: absolute; top: 50%; transform: translateY(-50%); width: 40px; height: 40px; background: rgba(0, 0, 0, 0.6); color: white; border: none; border-radius: 50%; font-size: 1.2rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
    .image-btn:hover { background: rgba(0, 0, 0, 0.9); transform: translateY(-50%) scale(1.1); }
    .image-btn-prev { left: 8px; }
    .image-btn-next { right: 8px; }
    .image-nav { position: absolute; bottom: 10px; right: 10px; background: rgba(0, 0, 0, 0.7); padding: 0.4rem 0.8rem; border-radius: 20px; color: white; font-size: 0.85rem; font-weight: bold; }
    .product-image img { transition: transform 0.3s ease, opacity 0.3s ease; }

    .product-info {
      padding: 1.5rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }

    .product-title {
      font-size: 1.1rem;
      font-weight: bold;
      color: #3e2f1c;
      margin-bottom: 0.5rem;
      min-height: 2.5rem;
    }

    .product-description {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 0.8rem;
      line-height: 1.4;
      flex-grow: 1;
    }

    .product-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      font-weight: 600;
      color: #5a4228;
    }

    .product-size {
      font-size: 0.85rem;
      background-color: #f3e5d5;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
    }

    .product-price {
      font-size: 1.4rem;
      color: #8a4c2c;
      font-weight: bold;
    }

    .size-selector {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .size-selector label {
      font-size: 0.85rem;
      font-weight: bold;
      color: #3e2f1c;
    }

    .size-selector select {
      padding: 0.6rem;
      border: 2px solid #8a4c2c;
      border-radius: 6px;
      font-size: 0.95rem;
      background-color: white;
      color: #3e2f1c;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .size-selector select:hover,
    .size-selector select:focus {
      border-color: #a85a38;
      background-color: #f9f5f0;
      outline: none;
    }

    .product-actions {
      display: flex;
      gap: 0.5rem;
    }

    .btn-add-cart {
      flex: 1;
      background-color: #8a4c2c;
      color: white;
      border: none;
      padding: 0.8rem;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }

    .btn-add-cart:hover {
      background-color: #a85a38;
      transform: scale(1.02);
    }

    .no-results {
      text-align: center;
      padding: 3rem 2rem;
      color: white;
      font-size: 1.2rem;
    }

    .cart-count {
      position: absolute;
      top: 0;
      right: 0;
      background-color: #d4af6a;
      color: #3e2f1c;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }

    footer {
      background-color: #3e2f1c;
      color: white;
      text-align: center;
      padding: 2rem;
      margin-top: 3rem;
    }

    /* Popup Styles */
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease;
    }

    .popup-overlay.active {
      display: flex;
    }

    .popup-modal {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.4s ease;
      position: relative;
    }

    @keyframes slideUp {
      from {
        transform: translateY(50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .popup-header {
      font-size: 1.5rem;
      font-weight: bold;
      color: #3e2f1c;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .popup-content {
      color: #666;
      font-size: 1rem;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .popup-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }

    .popup-btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .popup-btn-primary {
      background-color: #8a4c2c;
      color: white;
    }

    .popup-btn-primary:hover {
      background-color: #a85a38;
      transform: scale(1.05);
    }

    .popup-btn-secondary {
      background-color: #e0e0e0;
      color: #333;
    }

    .popup-btn-secondary:hover {
      background-color: #d0d0d0;
    }

    .popup-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.5rem;
      cursor: pointer;
      color: #999;
      transition: all 0.3s ease;
    }

    .popup-close:hover {
      color: #333;
      transform: scale(1.2);
    }

    .success-icon {
      font-size: 2rem;
    }

    /* Mobile Responsive Design */
    @media (max-width: 480px) {
      header {
        padding: 1rem;
      }

      header h1 {
        font-size: 1.4rem;
      }

      header p {
        font-size: 0.9rem;
        display: none;
      }

      nav {
        padding: 0.6rem 0.3rem;
        gap: 0.3rem;
      }

      nav a {
        padding: 0.5rem 0.6rem;
        font-size: 0.75rem;
      }

      .category-header {
        padding: 1.5rem 1rem;
        margin-bottom: 1rem;
      }

      .category-header h2 {
        font-size: 1.4rem;
        margin-bottom: 0.5rem;
      }

      .category-header p {
        font-size: 0.85rem;
      }

      .search-container {
        padding: 0 0.5rem;
        margin: 1rem auto;
      }

      .search-box {
        flex-direction: column;
        gap: 0.3rem;
      }

      .products-container {
        padding: 1rem 0.5rem;
      }

      .products-grid {
        grid-template-columns: repeat(1, 1fr);
        gap: 0.8rem;
      }

      .product-image {
        height: 140px;
      }

      .product-info {
        padding: 0.8rem;
      }

      .product-title {
        font-size: 0.9rem;
        min-height: 1.8rem;
      }

      .product-description {
        font-size: 0.7rem;
        margin-bottom: 0.4rem;
        line-height: 1.3;
      }

      .product-price {
        font-size: 1rem;
      }

      .image-btn {
        width: 36px;
        height: 36px;
        font-size: 1.1rem;
      }

      .image-nav {
        font-size: 0.75rem;
        padding: 0.3rem 0.6rem;
      }

      .product-size {
        font-size: 0.75rem;
        padding: 0.2rem 0.6rem;
      }

      .size-selector label {
        font-size: 0.75rem;
      }

      .size-selector select {
        padding: 0.4rem;
        font-size: 0.85rem;
      }

      .btn-add-cart {
        padding: 0.6rem;
        font-size: 0.8rem;
      }

      footer {
        padding: 1rem 0.5rem;
        font-size: 0.9rem;
      }
    }

    @media (min-width: 481px) and (max-width: 768px) {
      .products-container {
        padding: 1.5rem 0.8rem;
      }

      .products-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }

      .product-image {
        height: 160px;
      }

      .image-btn {
        width: 36px;
        height: 36px;
        font-size: 1rem;
      }

      .image-nav {
        font-size: 0.8rem;
      }

      .product-price {
        font-size: 1.1rem;
      }
    }

    @media (min-width: 769px) and (max-width: 1024px) {
      .products-container {
        padding: 2rem 1rem;
      }

      .products-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 1.3rem;
      }

      .product-image {
        height: 190px;
      }

      .image-btn {
        width: 38px;
        height: 38px;
        font-size: 1.1rem;
      }

      .product-price {
        font-size: 1.25rem;
      }
    }

    @media (min-width: 1025px) {
      .products-container {
        padding: 2rem;
      }

      .products-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 2rem;
      }

      .product-price {
        font-size: 1.4rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-top-bar">
      <div style="flex: 1;"></div>
      <div class="header-auth-buttons">
        <a id="loginBtn" href="login.html" class="auth-btn login">Login</a>
        <a id="signupBtn" href="signup.html" class="auth-btn login">Sign Up</a>
        <a id="dashboardBtn" href="dashboard.html" class="auth-btn primary" style="display: none;">Dashboard</a>
        <button id="logoutBtn" class="auth-btn logout" style="display: none; cursor: pointer; border: 1px solid rgba(232, 114, 44, 0.4);">Logout</button>
      </div>
      <a href="cart.html" class="cart-btn">
        <span class="cart-icon">🛒</span>
        <span id="cart-badge" class="cart-badge" style="display: none;">0</span>
      </a>
    </div>
    <div style="padding: 1.5rem;">
      <h1>African Artifacts</h1>
      <p>Authentic African Products | Premium Quality</p>
    </div>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="tshirts.html">T-Shirts</a>
    <a href="shirts.html">Shirts</a>
    <a href="jerseys.html">Jerseys</a>
    <a href="ponchos.html">Ponchos</a>
    <a href="hoodies.html">Hoodies</a>
    <a href="material.html">Material</a>
    <a href="blankets.html">Blankets</a>
    <a href="sandals.html">Sandals</a>
    <a href="womens.html">Women's</a>
    <a href="soapstone.html">Soapstone</a>
    <a href="leatherbags.html">Leather Bags</a>
    <a href="handmadebags.html">Handmade Bags</a>
    <a href="cart.html" style="position: relative;">
      Cart
      <span id="cart-count" class="cart-count" style="display: none;">0</span>
    </a>
  </nav>

  <div class="category-header">
    <h2>Premium African Shirts</h2>
    <p>Elevate your wardrobe with our collection of premium African shirts. Featuring handwoven fabrics, exquisite embroidery, and traditional designs crafted by skilled artisans.</p>
  </div>

  <div class="search-container">
    <div class="search-box">
      <input 
        type="text" 
        id="searchInput" 
        placeholder="Search products by name or description..." 
        onkeyup="filterProducts()"
      />
      <button onclick="filterProducts()">🔍 Search</button>
    </div>
  </div>

  <div class="products-container">
    <div class="products-grid" id="productsGrid">
      <!-- Products will be generated by JavaScript -->
    </div>
    <div id="noResults" class="no-results" style="display: none;">
      No products found matching your search. Please try again!
    </div>
  </div>

  <footer>
    <p>&copy; 2024 African Artifacts. All rights reserved.</p>
  </footer>

  <!-- Popup Modal -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup-modal">
      <span class="popup-close" onclick="closePopup()">✕</span>
      <div class="popup-header">
        <span class="success-icon" id="popupIcon">✓</span>
        <span id="popupTitle">Success</span>
      </div>
      <div class="popup-content" id="popupContent">
        Your item has been added to cart!
      </div>
      <div class="popup-actions">
        <button class="popup-btn popup-btn-secondary" onclick="closePopup()">Close</button>
        <button class="popup-btn popup-btn-primary" onclick="goToCart()">View Cart</button>
      </div>
    </div>
  </div>

  <script>
    const shirtImages = [
      "The Zika Shirt is your new go-to for effortless….jpg",
      "Red Embroidery on shirt.jpg",
      "Bulldog Gym Training Top Bodybuilding Mens T-Shirt….jpg",
      "Teen Boy Casual Simple Letter & Print Korte Mouw….jpg",
      "PRICES MAY VARY_ 100% Cotton Made in the USA and….jpg"
    ];
    
    const products = Array.from({length: 52}, (_, i) => ({
      id: i+1,
      name: ["The Zika Shirt Premium", "Red Embroidery Shirt", "Bulldog Gym Training", "Teen Casual Shirt", "Cotton Premium Shirt", "Zika Casual Style", "Red Embroidery Casual", "Bulldog Training Casual", "Teen Casual Style", "Cotton Casual Premium", "Zika Premium Edition", "Red Embroidery Premium", "Bulldog Gym Premium", "Teen Print Premium", "Cotton USA Premium", "Zika Ceremonial", "Red Embroidery Elite", "Bulldog Long Sleeve", "Teen Heritage Shirt", "Cotton Adventure", "Zika Mudcloth Style", "Red Embroidery Gold", "Bulldog Elegance", "Teen Indigo Blend", "Cotton Tribal", "Zika Silk Royal", "Red Embroidery Wax", "Bulldog Cultural", "Teen Heritage Plus", "Cotton Artisan", "Zika Festival", "Red Embroidery Blend", "Bulldog Royal", "Teen Indigo", "Cotton Embroidered", "Zika Silk Blend", "Red Embroidery Batik", "Bulldog Luxury", "Teen Cultural", "Cotton Tribal", "Zika Sunset", "Red Embroidery Heritage", "Bulldog Heritage", "Teen Premium", "Cotton Elite", "Zika Premium", "Red Embroidery Elite", "Bulldog Cultural", "Teen Tribal Master", "Cotton Heritage Master", "Zika Master Crafted", "Ultimate Premium"][i],
      description: ["The Zika Shirt - your new go-to for effortless style and comfort", "Elegant shirt with red embroidery detailing", "Premium Bulldog Gym Training bodybuilding shirt", "Teen boy casual with letter and print design", "100% cotton made in the USA premium quality", "Casual style Zika shirt for everyday wear", "Casual red embroidery shirt design", "Casual Bulldog training style shirt", "Teen casual letter and print design", "Casual premium cotton USA made shirt", "Zika shirt premium effortless edition", "Premium red embroidery shirt design", "Premium Bulldog gym training shirt", "Teen premium print shirt design", "USA made cotton premium shirt", "Zika shirt for special occasions", "Elite red embroidery shirt", "Bulldog long sleeve extended sizes", "Teen heritage pride design", "Cotton adventure themed shirt", "Zika mudcloth inspired shirt", "Red embroidery with gold threads", "Bulldog elegant sophisticated design", "Teen indigo blend comfort shirt", "Cotton tribal elegant patterns", "Zika silk royal blue edition", "Red embroidery wax cloth shirt", "Bulldog cultural canvas shirt", "Teen heritage with extended sizes", "Cotton artisan crafted shirt", "Zika festival ready shirt", "Red embroidery linen blend", "Bulldog royal quality shirt", "Teen indigo heritage patterns", "Cotton hand-embroidered heritage", "Zika silk blend premium", "Red embroidery batik shirt", "Bulldog luxury wax print", "Teen cultural blend shirt", "Cotton tribal heritage shirt", "Zika sunset inspired edition", "Red embroidery heritage shirt", "Bulldog heritage fabric shirt", "Teen premium indigo shirt", "Cotton elite embroidery shirt", "Zika premium silk shirt", "Red embroidery elite shirt", "Bulldog cultural heritage shirt", "Teen tribal master design", "Cotton heritage master collection", "Zika master crafted shirt", "Ultimate premium design shirt"][i],
      size: i % 29 === 18 || i % 29 === 29 ? "S-4XL" : "S-3XL",
      price: [54.99, 56.99, 58.99, 52.99, 62.99, 49.99, 55.99, 61.99, 53.99, 57.99, 59.99, 62.99, 54.99, 56.99, 58.99, 64.99, 52.99, 59.99, 55.99, 53.99, 60.99, 62.99, 57.99, 54.99, 56.99, 65.99, 58.99, 55.99, 59.99, 63.99, 56.99, 57.99, 58.99, 55.99, 60.99, 61.99, 59.99, 62.99, 57.99, 58.99, 56.99, 58.99, 55.99, 59.99, 57.99, 63.99, 60.99, 56.99, 59.99, 64.99, 62.99, 61.99][i],
      images: [shirtImages[i % 5], shirtImages[(i+1) % 5], shirtImages[(i+2) % 5]],
      currentImageIndex: 0
    }));

    function renderProducts(productsToShow = products) {
      const grid = document.getElementById('productsGrid');
      const noResults = document.getElementById('noResults');

      if (productsToShow.length === 0) {
        grid.innerHTML = '';
        noResults.style.display = 'block';
        return;
      }

      noResults.style.display = 'none';
      grid.innerHTML = productsToShow.map(product => `
        <div class="product-card">
          <div class="product-image">
            <img class="product-img-${product.id}" src="${product.images[product.currentImageIndex]}" alt="${product.name}" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 250 250%22><rect fill=%22%23d9cbb4%22 width=%22250%22 height=%22250%22/><text x=%2250%25%22 y=%2250%25%22 font-family=%22Arial%22 font-size=%2216%22 fill=%22%238a6d47%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22>Product Image</text></svg>'">
            <button class="image-btn image-btn-prev" onclick="changeProductImage(${product.id}, -1)">❮</button>
            <button class="image-btn image-btn-next" onclick="changeProductImage(${product.id}, 1)">❯</button>
            <div class="image-nav" id="img-counter-${product.id}">${product.currentImageIndex + 1}/${product.images.length}</div>
          </div>
          <div class="product-info">
            <h3 class="product-title">${product.name}</h3>
            <p class="product-description">${product.description}</p>
            <div class="product-details">
              <span class="product-price">$${product.price.toFixed(2)}</span>
            </div>
            <div class="size-selector">
              <label for="size-${product.id}">Select Size:</label>
              <select id="size-${product.id}">
                <option value="">Choose a size...</option>
                <option value="XS">XS (Extra Small)</option>
                <option value="S">S (Small)</option>
                <option value="M">M (Medium)</option>
                <option value="L">L (Large)</option>
                <option value="XL">XL (Extra Large)</option>
                <option value="2XL">2XL (2X Large)</option>
                <option value="3XL">3XL (3X Large)</option>
                <option value="4XL">4XL (4X Large)</option>
              </select>
            </div>
            <div class="product-actions">
              <button class="btn-add-cart" onclick="addToCart(${product.id}, '${product.name}', ${product.price})">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function filterProducts() {
      const searchInput = document.getElementById('searchInput').value.toLowerCase();
      const filtered = products.filter(product =>
        product.name.toLowerCase().includes(searchInput) ||
        product.description.toLowerCase().includes(searchInput)
      );
      renderProducts(filtered);
    }

    function changeProductImage(productId, direction) {
      const product = products.find(p => p.id === productId);
      if (!product) return;
      
      product.currentImageIndex += direction;
      if (product.currentImageIndex < 0) product.currentImageIndex = product.images.length - 1;
      if (product.currentImageIndex >= product.images.length) product.currentImageIndex = 0;
      
      const img = document.querySelector(`.product-img-${productId}`);
      const counter = document.getElementById(`img-counter-${productId}`);
      
      if (img) {
        img.style.opacity = '0';
        setTimeout(() => {
          img.src = product.images[product.currentImageIndex];
          img.style.opacity = '1';
        }, 150);
      }
      if (counter) counter.textContent = `${product.currentImageIndex + 1}/${product.images.length}`;
    }

    function addToCart(productId, productName, price) {
      const sizeSelect = document.getElementById(`size-${productId}`);
      const selectedSize = sizeSelect.value;

      if (!selectedSize) {
        showPopup('⚠️ Size Required', 'Please select a size before adding to cart.', '⚠️');
        return;
      }

      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.push({ 
        name: productName, 
        price: price, 
        quantity: 1, 
        size: selectedSize,
        timestamp: new Date().toISOString() 
      });
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      showPopup('👕 Added to Cart', `${productName} (Size: ${selectedSize}) has been added to your cart!`, '✓');
      sizeSelect.value = ''; // Reset size selector
    }

    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const countBadge = document.getElementById('cart-badge');
      if (cart.length > 0) {
        countBadge.textContent = cart.length;
        countBadge.style.display = 'flex';
      } else {
        countBadge.style.display = 'none';
      }
    }

    // Check user authentication status and update buttons
    function checkUserAuthStatus() {
      const token = localStorage.getItem('authToken');
      const loginBtn = document.getElementById('loginBtn');
      const signupBtn = document.getElementById('signupBtn');
      const dashboardBtn = document.getElementById('dashboardBtn');
      const logoutBtn = document.getElementById('logoutBtn');

      if (token) {
        // User is logged in - show dashboard and logout
        if (loginBtn) loginBtn.style.display = 'none';
        if (signupBtn) signupBtn.style.display = 'none';
        if (dashboardBtn) dashboardBtn.style.display = 'inline-block';
        if (logoutBtn) logoutBtn.style.display = 'inline-block';
      } else {
        // User is not logged in - show login and signup
        if (loginBtn) loginBtn.style.display = 'inline-block';
        if (signupBtn) signupBtn.style.display = 'inline-block';
        if (dashboardBtn) dashboardBtn.style.display = 'none';
        if (logoutBtn) logoutBtn.style.display = 'none';
      }
    }

    // Handle logout
    document.addEventListener('DOMContentLoaded', function() {
      checkUserAuthStatus();
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          localStorage.removeItem('authToken');
          localStorage.removeItem('cart');
          sessionStorage.removeItem('checkoutData');
          checkUserAuthStatus();
          window.location.href = 'index.html';
        });
      }
    });

    function showPopup(title, message, icon) {
      document.getElementById('popupTitle').textContent = title;
      document.getElementById('popupContent').textContent = message;
      document.getElementById('popupIcon').textContent = icon;
      document.getElementById('popupOverlay').classList.add('active');
    }

    function closePopup() {
      document.getElementById('popupOverlay').classList.remove('active');
    }

    function goToCart() {
      closePopup();
      window.location.href = 'cart.html';
    }

    // Keyboard navigation for images
    let activeProductId = null;
    document.addEventListener('keydown', (e) => {
      if (activeProductId && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
        changeProductImage(activeProductId, e.key === 'ArrowLeft' ? -1 : 1);
      }
    });

    // Track which product card is being hovered
    document.addEventListener('mouseover', (e) => {
      const card = e.target.closest('.product-card');
      if (card) {
        const idMatch = card.querySelector('[class*="product-img-"]')?.className.match(/product-img-(\d+)/);
        if (idMatch) activeProductId = parseInt(idMatch[1]);
      }
    });

    renderProducts();
    updateCartCount();
  </script>
</body>
</html>